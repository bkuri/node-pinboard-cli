#!/usr/bin/coffee
'use strict'


{PINBOARD_FORMAT} = process.env
{argv, define, one, pinboard} = require('../lib/tools')


secret = define('Returns the user\'s secret RSS key (for viewing private feeds).')

secret
  .option '-f --format [fmt]', 'output format', /^(color|json)$/i, PINBOARD_FORMAT

  .action ->
    {format} = require('../lib/format')
    respond = format one(secret.format, PINBOARD_FORMAT)

    try
      pinboard().userSecret (result) ->
        respond result

    catch error
      respond error, 'error'

  .parse argv()
