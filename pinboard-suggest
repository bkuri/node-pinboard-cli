#!/usr/bin/coffee
'use strict'

(process.exit yes) if (process.argv.length < 3)


# chalk = (require 'chalk')
{token} = (require 'config')
Pinboard = (require 'node-pinboard')


(require 'commander')
  .usage '<url>'
  .description 'Returns a list of popular tags and recommended tags for a given URL. Popular tags are tags used site-wide for the url; recommended tags are drawn from the user\'s own tags.'

  .action (url) ->
    pinboard = new Pinboard(token)

    try
      pinboard.suggest url, (body) ->
        console.log (JSON.stringify body)

    catch e
      console.error e
      process.exit yes

    return

  .parse process.argv
