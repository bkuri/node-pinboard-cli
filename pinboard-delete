#!/usr/bin/coffee
'use strict'

(process.exit yes) if (process.argv.length < 3)


# chalk = (require 'chalk')
{token} = (require 'config')
Pinboard = (require 'node-pinboard')


(require 'commander')
  .description 'Delete a bookmark.'
  .usage '<url>'

  .action (url) ->
    pinboard = new Pinboard(token)

    try
      pinboard.delete url, (result) ->
        process.exit not (result.result_code? and (result.result_code is 'done'))

    catch e
      console.error e
      process.exit yes

    return

  .parse process.argv
