#!/usr/bin/coffee
'use strict'

(process.exit yes) if (process.argv.length < 3)


# chalk = (require 'chalk')
config = (require './config')
Pinboard = (require 'node-pinboard')


(require 'commander')
  .description 'Delete a bookmark.'
  .usage '<url>'

  .action (url) ->
    pinboard = new Pinboard(config.token)

    try
      pinboard.delete url, (res) ->
        process.exit not (res.result_code? and (res.result_code is 'done'))

    catch e
      console.error e
      process.exit yes

    return

  .parse process.argv
